/*! baron 02-04-2013 */
(function(e,t){"use strict";if(e!==t){var o=[],s=e.baron,n=e.jQuery,i={vertical:{x:"Y",pos:"top",crossPos:"left",size:"height",crossSize:"width",client:"clientHeight",crossClient:"clientWidth",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},horizontal:{x:"X",pos:"left",crossPos:"top",size:"width",crossSize:"height",client:"clientWidth",crossClient:"clientHeight",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},r=function(e){var t;return e=e||{},e.scroller=e.scroller||this,t=new l(e),t.u(),o.push(t),t};r.u=function(){for(var e=0;o.length>e;e++)o[e].u()},r.noConflict=function(){return e.baron=s,r},r.version="0.4";var l=function(o){var s,l,c,f;if(l=o.selector||n,l&&(s=o.event||function(e,t,o,s){n(e)[s||"on"](t,o)},(o.event||n)&&(c=o.dom||n,c&&(f=l(o.scroller))))){f[0]||(f=[f]),r.init=function(o){function n(e){o.barOnCls&&(e?c(y).addClass(o.barOnCls):c(y).removeClass(o.barOnCls))}function r(){n(y[N.client]<y[N.scrollSize])}function f(e){var t=o.barMinSize||20;e>0&&t>e&&(e=t),c(W).css(N.size,e+"px")}function a(e){c(W).css(N.pos,e+"px")}function u(){return O[N.client]-W[N.offset]}function h(e){return e*u()}function d(e){return e/u()}function p(){return!1}function v(e){s(document,"selectpos",p,e?"off":"on")}function C(e,s){(o.viewMinSize||0)>w&&(s=t),s!==t?(s+="px",c(b[e]).css(N.pos,s).addClass(E)):c(b[e]).css(N.pos,"").removeClass(E)}function m(e){try{Y=document.createEvent("WheelEvent"),Y.initWebKitWheelEvent(e.originalEvent.wheelDeltaX,e.originalEvent.wheelDeltaY),y.dispatchEvent(Y),e.preventDefault()}catch(e){}}function g(e){if(c(y).css(N.crossSize,y.parentNode[N.crossClient]+y[N.crossOffset]-y[N.crossClient]+"px"),w=y[N.client],e&&(S=[]),L=[],F=[],b=l(o.header,y)){for(e&&(s(b,"mousewheel",m,"off"),s(b,"mousewheel",m)),Y=0;b.length>Y;Y++)F[Y]=F[Y-1]||0,b[Y-1]&&(F[Y]+=b[Y-1][N.offset]),T={},T[N.size]=b[Y][N.offset],c(b[Y].parentNode).css(T),T={},T[N.crossSize]=b[Y].parentNode[N.crossClient],c(b[Y]).css(T),w-=b[Y][N.offset],S[Y]=b[Y].parentNode[N.offsetPos];o.trackSmartLim&&(T={},T[N.pos]=b[0].parentNode[N.offset],c(O).css(T))}}function z(){var e,s,n,i,r;if(n=O[N.client]*y[N.client]/y[N.scrollSize],s!=n&&(f(n),s=n),e=-(y["page"+N.x+"Offset"]||y[N.scroll]),A=h(-e/(y[N.scrollSize]-y[N.client])),a(A),b){var l;for(Y=0;b.length>Y;Y++)r=0,S[Y]+e<F[Y]+D?(r=1,i=F[Y]):S[Y]+e>F[Y]+w-D?(r=2,i=F[Y]+w):(r=3,i=t),r!=L[Y]&&(C(Y,i),L[Y]=r,l=!0);if(l)for(Y=0;b.length>Y;Y++)L[Y]!=L[Y+1]&&1==L[Y]&&o.hBeforeFixCls?c(b[Y]).addClass(o.hBeforeFixCls).removeClass(o.hAfterFixCls+""):L[Y]!=L[Y-1]&&2==L[Y]&&o.hAfterFixCls?c(b[Y]).addClass(o.hAfterFixCls).removeClass(o.hBeforeFixCls+""):c(b[Y]).removeClass(o.hBeforeFixCls+"").removeClass(o.hAfterFixCls+"")}}function x(){clearTimeout(B),B=setTimeout(function(){g(),z(),r()},200)}var b,w,S,F,B,W,O,A,E,N,y,H,P,T,D,Y,L=[];return y=o.scroller,this.invalidateBar=r,this.viewport=g,this.updateScrollBar=z,o.bar?W=l(o.bar,y)[0]:(W=l("*",y),W=W[W.length-1]),O=l(o.track,y)[0],O=O||W.parentNode,y&&W?(y.setAttribute("data-baron","inited"),N=i.vertical,o.h&&(N=i.horizontal),D=o.fixRadius||0,E=o.hFixCls,s(y,"scroll",z),s(W,"mousedown",function(e){e.preventDefault(),v(),H=1}),s(document,"mouseup blur",function(){v(1),H=0}),s(document,"mousedown",function(e){2!=e.button&&(P=e.clientY-A)}),s(document,"mousemove",function(e){H&&(y.scrollTop=d(e.clientY-P)*(y[N.scrollSize]-y[N.client]))}),s(e,"resize",x),s(y,"sizeChange",x),this):t},r.init.prototype.update=function(){this.viewport(1),this.updateScrollBar(),this.invalidateBar()};for(var a=0;f.length>a;a++)f[a].getAttribute("data-baron")?s(f[a],"sizeChange",t,"trigger"):(o.scroller=f[a],this[a]=new r.init(o));return this}};l.prototype.u=function(){for(var e=-1;this[++e];)this[e].update()},n&&n.fn&&(n.fn.baron=r),"undefined"!=typeof module&&module.exports?module.exports=r:e.baron=r}})(window);