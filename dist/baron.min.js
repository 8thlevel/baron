/*! baron 02-04-2013 */
(function(e,t){"use strict";if(e!==t){var o=[],s=e.baron,n=e.jQuery,i={vertical:{x:"Y",pos:"top",crossPos:"left",size:"height",crossSize:"width",client:"clientHeight",crossClient:"clientWidth",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},horizontal:{x:"X",pos:"left",crossPos:"top",size:"width",crossSize:"height",client:"clientWidth",crossClient:"clientHeight",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},r=function(e){var t;return e=e||{},e.scroller=e.scroller||this,t=new l(e),t.u(),o.push(t),t};r.u=function(){for(var e=0;o.length>e;e++)o[e].u()},r.noConflict=function(){return e.baron=s,r},r.version="0.4";var l=function(o){var s,l,c,f;if(l=o.selector||n,l&&(s=o.event||function(e,t,o,s){n(e)[s||"on"](t,o)},(o.event||n)&&(c=o.dom||n,c&&(f=l(o.scroller))))){f[0]||(f=[f]),r.init=function(o){function n(e){o.barOnCls&&(e?c(y).addClass(o.barOnCls):c(y).removeClass(o.barOnCls))}function r(){n(y[N.client]<y[N.scrollSize])}function f(e){var t=o.barMinSize||20;e>0&&t>e&&(e=t),c(O).css(N.size,e+"px")}function a(e){c(O).css(N.pos,e+"px")}function u(){return W[N.client]-O[N.offset]}function h(e){return e*u()}function d(e){return e/u()}function p(){return!1}function v(e){s(document,"selectpos",p,e?"off":"on")}function C(e){try{M=document.createEvent("WheelEvent"),M.initWebKitWheelEvent(e.originalEvent.wheelDeltaX,e.originalEvent.wheelDeltaY),y.dispatchEvent(M),e.preventDefault()}catch(e){}}function m(e,s){(o.viewMinSize||0)>w&&(s=t),s!==t?(s+="px",c(b[e]).css(N.pos,s).addClass(E)):c(b[e]).css(N.pos,"").removeClass(E)}function g(e){if(c(y).css(N.crossSize,y.parentNode[N.crossClient]+y[N.crossOffset]-y[N.crossClient]+"px"),w=y[N.client],e&&(S=[]),Y=[],F=[],b=l(o.header,y)){for(e&&(s(b,"mousewheel",C,"off"),s(b,"mousewheel",C)),M=0;b.length>M;M++)F[M]=F[M-1]||0,b[M-1]&&(F[M]+=b[M-1][N.offset]),P={},P[N.size]=b[M][N.offset],c(b[M].parentNode).css(P),P={},P[N.crossSize]=b[M].parentNode[N.crossClient],c(b[M]).css(P),w-=b[M][N.offset],S[M]=b[M].parentNode[N.offsetPos];o.trackSmartLim&&(P={},P[N.pos]=b[0].parentNode[N.offset],c(W).css(P))}}function z(){var e,s,n,i,r;if(n=W[N.client]*y[N.client]/y[N.scrollSize],s!=n&&(f(n),s=n),e=-(y["page"+N.x+"Offset"]||y[N.scroll]),A=h(-e/(y[N.scrollSize]-y[N.client])),a(A),b){var l;for(M=0;b.length>M;M++)r=0,S[M]+e<F[M]+T?(r=1,i=F[M]):S[M]+e>F[M]+w-T?(r=2,i=F[M]+w):(r=3,i=t),r!=Y[M]&&(m(M,i),Y[M]=r,l=!0);if(l)for(M=0;b.length>M;M++)Y[M]!=Y[M+1]&&1==Y[M]&&o.hBeforeFixCls?c(b[M]).addClass(o.hBeforeFixCls).removeClass(o.hAfterFixCls+""):Y[M]!=Y[M-1]&&2==Y[M]&&o.hAfterFixCls?c(b[M]).addClass(o.hAfterFixCls).removeClass(o.hBeforeFixCls+""):c(b[M]).removeClass(o.hBeforeFixCls+"").removeClass(o.hAfterFixCls+"")}}function x(){clearTimeout(B),B=setTimeout(function(){g(),z(),r()},200)}var b,w,S,F,B,O,W,A,E,N,y,D,H,P,T,M,Y=[];return y=o.scroller,this.invalidateBar=r,this.viewport=g,this.updateScrollBar=z,o.bar?O=l(o.bar,y)[0]:(O=l("*",y),O=O[O.length-1]),W=l(o.track,y)[0],W=W||O.parentNode,y&&O?(y.setAttribute("data-baron","inited"),N=i.vertical,o.h&&(N=i.horizontal),T=o.fixRadius||0,E=o.hFixCls,s(y,"scroll",z),s(O,"mousedown",function(e){e.preventDefault(),v(),D=1}),s(document,"mouseup blur",function(){v(1),D=0}),s(document,"mousedown",function(e){2!=e.button&&(H=e.clientY-A)}),s(document,"mousemove",function(e){D&&(y.scrollTop=d(e.clientY-H)*(y[N.scrollSize]-y[N.client]))}),s(e,"resize",x),s(y,"sizeChange",x),s(O,"mousewheel DOMMouseScroll",C),W!=y&&s(W,"mousewheel",C),this):t},r.init.prototype.update=function(){this.viewport(1),this.updateScrollBar(),this.invalidateBar()};for(var a=0;f.length>a;a++)f[a].getAttribute("data-baron")?s(f[a],"sizeChange",t,"trigger"):(o.scroller=f[a],this[a]=new r.init(o));return this}};l.prototype.u=function(){for(var e=-1;this[++e];)this[e].update()},n&&n.fn&&(n.fn.baron=r),"undefined"!=typeof module&&module.exports?module.exports=r:e.baron=r}})(window);