/*! baron 07-04-2013 */
(function(e,t){"use strict";function s(){}function o(r){function f(s){o.init=function(o){function i(){o.barOnCls&&(B[A.client]<B[A.scrollSize]?d(B).addClass(o.barOnCls):d(B).removeClass(o.barOnCls))}function r(e){var t=o.barMinSize||20;e>0&&t>e&&(e=t),d(O).css(A.size,parseInt(e)+"px")}function l(e){d(O).css(A.pos,parseInt(e)+"px")}function c(){return H[A.client]-k-O[A.offset]}function f(e){return e*c()+k}function a(e){return(e-k)/c()}function p(){return!1}function v(e){u(document,"selectpos",p,e?"off":"on")}function C(e){try{D=document.createEvent("WheelEvent"),D.initWebKitWheelEvent(e.originalEvent.wheelDeltaX,e.originalEvent.wheelDeltaY),B.dispatchEvent(D),e.preventDefault()}catch(e){}}function m(e,s){(o.viewMinSize||0)>w&&(s=t),s!==t?(s+="px",d(z[e]).css(A.pos,s).addClass(y)):d(z[e]).css(A.pos,"").removeClass(y)}function b(e){if(d(B).css(A.crossSize,B.parentNode[A.crossClient]+B[A.crossOffset]-B[A.crossClient]+"px"),w=B[A.client],e&&(S=[]),L=[],W=[],z=h(o.header,B)){for(e&&(u(z,"mousewheel",C,"off"),u(z,"mousewheel",C)),D=0;z.length>D;D++)W[D]=W[D-1]||0,z[D-1]&&(W[D]+=z[D-1][A.offset]),P={},P[A.size]=z[D][A.offset],d(z[D].parentNode).css(P),P={},P[A.crossSize]=z[D].parentNode[A.crossClient],d(z[D]).css(P),w-=z[D][A.offset],S[D]=z[D].parentNode[A.offsetPos];o.trackSmartLim&&(H!=B?(P={},P[A.pos]=z[0].parentNode[A.offset],d(H).css(P)):k=z[0].parentNode[A.offset])}}function g(){var e,s,n,i,c;if(n=(H[A.client]-k)*B[A.client]/B[A.scrollSize],s!=n&&(r(n),s=n),e=-(B["page"+A.x+"Offset"]||B[A.scroll]),N=f(-e/(B[A.scrollSize]-B[A.client])),l(N),z){var a;for(D=0;z.length>D;D++)c=0,S[D]+e<W[D]+T?(c=1,i=W[D]):S[D]+e>W[D]+w-T?(c=2,i=W[D]+w):(c=3,i=t),c!=L[D]&&(m(D,i),L[D]=c,a=!0);if(a)for(D=0;z.length>D;D++)L[D]!=L[D+1]&&1==L[D]&&o.hBeforeFixCls?d(z[D]).addClass(o.hBeforeFixCls).removeClass(o.hAfterFixCls+""):L[D]!=L[D-1]&&2==L[D]&&o.hAfterFixCls?d(z[D]).addClass(o.hAfterFixCls).removeClass(o.hBeforeFixCls+""):d(z[D]).removeClass(o.hBeforeFixCls+"").removeClass(o.hAfterFixCls+"")}}function x(){clearTimeout(F),F=setTimeout(function(){b(),g(),i()},200)}var z,w,S,W,F,O,H,N,y,A,B,E,_,P,T,D,L=[],k=0;return B=o.scroller,this._barOn=i,this._uView=b,this._uBar=g,o.bar?O=h(o.bar,B)[0]:(O=h("*",B),O=O[O.length-1]),O||n(11),H=h(o.track,B)[0],H=H||O.parentNode,B.setAttribute("data-baron","inited"),A=s.dir,T=o.fixRadius||0,y=o.hFixCls,u(B,"scroll",g),u(O,"mousedown",function(e){e.preventDefault(),v(),E=1}),u(document,"mouseup blur",function(){v(1),E=0}),u(document,"mousedown",function(e){2!=e.button&&(_=e["client"+A.x]-N)}),u(document,"mousemove",function(e){E&&(B[A.scroll]=a(e["client"+A.x]-_)*(B[A.scrollSize]-B[A.client]))}),u(e,"resize",x),u(B,"sizeChange",x),u(O,"mousewheel",C),H!=B&&u(H,"mousewheel",C),this},o.init.prototype.update=function(){this._uView(1),this._uBar(),this._barOn()};for(var i=0,r=0;p.length>r;r++)p[r].getAttribute("data-baron")?u(p[r],"sizeChange",t,"trigger"):(s.scroller=p[r],p[r].scrollHeight>p[r].clientHeight&&(s.dir=c.v,s.bar=s.vbar||s.bar,this[i++]=new o.init(s)),(p[r].scrollWidth>p[r].clientWidth||"h"==s.direction||"hv"==s.direction)&&(s.dir=c.h,s.bar=s.hbar||s.bar,this[i++]=new o.init(s)));return this}var a,u,h,d,p;n=function(e){s(e,r)},r=r||{},h=r.selector||l,h||n(1),u=r.event||function(e,t,s,o){l(e)[o||"on"](t,s)},r.event||l||n(2),d=r.dom||l,d||n(3),p=h(r.scroller||this),p[0]||(p=[p]),p[0].nodeType||n(10),f.prototype.u=function(){for(var e=-1;this[++e];)this[e].update()};try{a=new f(r),a.u(),i.push(a)}catch(v){}return a}var n,i=[],r=e.baron,l=e.jQuery,c={v:{x:"Y",pos:"top",crossPos:"left",size:"height",crossSize:"width",client:"clientHeight",crossClient:"clientWidth",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:"left",crossPos:"top",size:"width",crossSize:"height",client:"clientWidth",crossClient:"clientHeight",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}};e&&(o.u=function(){for(var e=0;i.length>e;e++)i[e].u()},o.noConflict=function(){return e.baron=r,o},o.version="0.4.x",l&&l.fn&&(l.fn.baron=o),e.baron=o,e.module&&module.exports&&(module.exports=o.noConflict()))})(window);